{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.d5e21dfb579766881e84.hot-update.js","sources":["webpack:///./components/Table.js"],"sourcesContent":["import TableRow from './TableRow';\r\nimport request from '../assets/request';\r\n\r\nclass Table extends React.Component { \r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      listThesis: [],\r\n      ownThesisInfo: [],\r\n      loading: true\r\n    }\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.getAllThesis()\r\n    this.getOwnThesis()\r\n  }\r\n\r\n  render = () => {\r\n    const {onChange, filter, search, own} = this.props;\r\n    return (\r\n    <div className=\"table-container\">\r\n          <table className=\"table table-filter\">\r\n            <thead className=\"theadTitle\">\r\n              <tr>\r\n                <td colSpan={3}>Khóa luận</td>\r\n                <td>#</td>\r\n                <td style={{textAlign: \"left\"}}>Ngày cập nhật</td>\r\n                <td colSpan={2}>Hành động</td>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {!this.state.loading? this.renderListThesis(search, filter, own) : this.renderLoading()}\r\n            </tbody>\r\n          </table>\r\n    </div>\r\n  )}\r\n\r\n  getAllThesis = () => {\r\n    request('/thesis/info')\r\n      .then(async result => {\r\n        if(!result.result || !result.result[0] || result.result === [] || !result.httpCode === 200) this.setState({listThesis: []})\r\n        else {\r\n          this.setState({listThesis: result.result, loading: false})\r\n          let list = result.result;\r\n          for(let i = 0; i < list.length; i++){\r\n            let lecturer = await request('/lecturer/info', 'GET', `section=all&id=${list[i].lecturerId}`);\r\n            list[i].lecturerName = lecturer.result ? lecturer.result[0].fullName: '';\r\n          }\r\n          this.setState({listThesis: list, loading: false})\r\n        }\r\n      })\r\n  }\r\n\r\n  getOwnThesis = () => {\r\n    request('/thesis/info', 'GET', 'section=self')\r\n      .then (async result => {\r\n        if(!result.result || !result.result[0] || result.result === [] || !result.httpCode === 200) this.setState({ownThesisInfo: []})\r\n        else {\r\n          this.setState({ownThesisInfo: result.result})\r\n          let list = result.result;\r\n          for(let i = 0; i < list.length; i++){\r\n            let lecturer = await request('/lecturer/info', 'GET', `section=all&id=${list[i].lecturerId}`);\r\n            let student = (localStorage.getItem('userRole') === 'LEC')? await request('/student/info', 'GET', `id=${list[i].studentId}`): null; \r\n            list[i].lecturerName = lecturer.result ? lecturer.result[0].fullName: '';\r\n            list[i].studentName = student? student.result? student.result[0].fullName : '' : '';\r\n          }\r\n          this.setState({ownThesisInfo: list})\r\n        }\r\n      })\r\n  }\r\n\r\n  renderListThesis = (search, filter, own) => {\r\n    let check = false;\r\n    let list = this.state.listThesis;\r\n    if(own) list = this.state.ownThesisInfo;\r\n    let result = list.map((ele, index) => {\r\n        if( (ele.state === filter || (filter === 'ALL')) && ((ele.thesisSubject + `(${ele.thesisCode})` + ele.lecturerName).includes(search)) )\r\n          return <TableRow {...ele} own={own} key={index}/>\r\n      })\r\n    if(localStorage.getItem('userRole') === 'LEC' && own) result.push(\r\n      <tr key={result.length}>\r\n        <td colSpan=\"7\" style={{verticalAlign: \"center\", textAlign: \"center\", fontSize: \"2rem\", color: \"#ddd\"}} className=\"fadein_ele\">\r\n          <a><i className=\"fas fa-plus\"></i> Thêm khóa luận </a>\r\n        </td>\r\n      </tr>\r\n    )\r\n    for( let i = 0; i < result.length; i++) if(result[i]) check = true;\r\n    if(!check) return (\r\n      <tr>\r\n        <td colSpan=\"7\" style={{verticalAlign: \"center\", textAlign: \"center\", fontSize: \"3rem\", color: \"#ddd\"}} className=\"fadein_ele\">\r\n          <i className=\"fas fa-database\"></i> NO DATA\r\n        </td>\r\n      </tr>\r\n    )\r\n    else return result\r\n  }\r\n\r\n  renderLoading = () => {\r\n    return (\r\n      <tr>\r\n        <td colSpan=\"7\" style={{verticalAlign: \"center\", textAlign: \"center\"}} className=\"fadein_ele\">\r\n          <i className=\"fa fa-spinner fa-spin\"></i> Loading...\r\n        </td>\r\n      </tr>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Table"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAUA;AACA;AAAA;AACA;AACA;AAbA;AAcA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AAjCA;AAmCA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAFA;AAAA;AACA;AADA;AAGA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAMA;AACA;AACA;AARA;AAKA;AALA;AAAA;AACA;AADA;AASA;AAAA;AAAA;AAAA;AACA;AAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAFA;AAAA;AAAA;AAAA;AAaA;AACA;AAjDA;AAmDA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAFA;AAAA;AACA;AADA;AAGA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAMA;AACA;AAPA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAOA;AACA;AACA;AACA;AAVA;AAKA;AALA;AAAA;AACA;AADA;AAWA;AAAA;AAAA;AACA;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAFA;AAAA;AAAA;AAAA;AAeA;AACA;AAnEA;AAqEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AA7FA;AA+FA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AArGA;AACA;AACA;AACA;AAHA;AAFA;AAOA;AACA;;AATA;AACA;AAyGA;;;;A","sourceRoot":""}