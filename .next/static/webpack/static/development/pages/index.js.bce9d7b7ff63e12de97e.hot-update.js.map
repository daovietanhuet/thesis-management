{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.bce9d7b7ff63e12de97e.hot-update.js","sources":["webpack:///./components/TableRow.js"],"sourcesContent":["import moment from 'moment';\r\nimport request from '../assets/request';\r\n\r\nconst TableRow = props => {\r\n  const {thesisSubject, state, updated_at, studentId, thesisCode, id, thesisMark} = props\r\n  return (\r\n    <tr data-status={state} className=\"fadein_ele\">\r\n      <td>\r\n        <a href=\"javascript:;\">\r\n         \r\n        </a>\r\n      </td>\r\n      <td>\r\n          <a href=\"#\">\r\n            <img src=\"_next/static/images/thesis_icon.png\" className=\"media-photo\"  data-toggle=\"modal\"  data-target=\"#myModal\"/>\r\n          </a>\r\n      </td>\r\n      <td>\r\n        <h4 className=\"title\">\r\n          <a className=\"name\">Lê Mai Phương</a> <i className=\"fas fa-link\"></i> \r\n          <a className=\"name\">{` ${studentId}`? studentId:''}</a>\r\n          {localStorage.getItem('userRole') !== 'STU' ? (` ${thesisMark}`? thesisMark: ' (chưa có điểm)'): ''}\r\n        </h4>\r\n        <p className=\"summary\"> {thesisSubject} ({thesisCode}) </p>\r\n      </td>\r\n      <td>\r\n        <span className={getClassStatus(state)}>({getStatus(state)})</span>\r\n      </td>\r\n      <td>\r\n        <span className=\"media-meta\">{moment(updated_at).format(\"DD/MM/YYYY\")}</span>\r\n      </td>\r\n      <td>\r\n          <button \r\n            data-toggle={(state === 'NEW' && localStorage.getItem('userRole') === 'STU') || (state === 'WAITTING') ? '' : 'modal'} \r\n            data-target=\"#myModal\"\r\n            className={state === 'CANCELED' ? 'disappear': 'btn btn-default btn-action-pos'}\r\n            onClick={e => doActivity(state, 'pos', id)}\r\n            type=\"button\">{getActivity(state, 'pos')}</button>\r\n      </td>\r\n      <td>\r\n          <button \r\n            className={localStorage.getItem('userRole') === 'STU' || state === 'CANCELED' ? 'disappear': 'btn btn-default btn-action-neg'}\r\n            onClick={e => doActivity(state, 'neg', id)}\r\n            type=\"button\">{getActivity(state, 'neg')}</button>\r\n      </td>\r\n    </tr>\r\n  );\r\n};\r\n\r\nconst getStatus = (status) => {\r\n  switch(status) {\r\n    case 'NEW': return 'Mới';\r\n    case 'WAITTING': return 'Đang chờ';\r\n    case 'CANCELED': return 'Bị hủy';\r\n    case 'ACTIVE': return 'Hoạt động';\r\n  }\r\n}\r\n\r\nconst getClassStatus = (status) => {\r\n  switch(status) {\r\n    case 'NEW': return 'new';\r\n    case 'WAITTING': return 'waitting';\r\n    case 'CANCELED': return 'canceled';\r\n    case 'ACTIVE': return 'active';\r\n  }\r\n}\r\n\r\nconst getActivity = (status, type) => {\r\n  let userRole = localStorage.getItem('userRole');\r\n  let isStudent = userRole === 'STU';\r\n  switch(type) {\r\n    case 'pos': \r\n      switch(status) {\r\n        case 'NEW': return isStudent? 'Đăng ký': \"Sửa\";\r\n        case 'WAITTING': return isStudent? 'Hủy': \"Chấp nhận\";\r\n        case 'ACTIVE': return isStudent? 'Sửa': \"Chấm điểm\";\r\n      }\r\n    case 'neg':\r\n      switch(status) {\r\n        case 'NEW': return 'Xóa';\r\n        case 'WAITTING': return 'Từ chối';\r\n        case 'ACTIVE': return 'Hoãn';\r\n      }\r\n  }\r\n}\r\n\r\nconst doActivity = (status, type, thesisId) => {\r\n  let userRole = localStorage.getItem('userRole');\r\n  let isStudent = userRole === 'STU';\r\n  let config = null;\r\n  switch(type) {\r\n    case 'pos': \r\n      switch(status) {\r\n        case 'NEW': config = isStudent? {endpoint: '/student/thesis/join/', methods: 'POST'}:null; break;\r\n        case 'WAITTING': config = isStudent? {endpoint: '/student/thesis/exit/', methods: 'POST'}: {endpoint: '/lecturer/thesis/accept/',  methods: 'POST'}; break;\r\n        default: config = null;\r\n      }; break;\r\n    case 'neg':\r\n      switch(status) {\r\n        case 'NEW': config = {endpoint: '/lecturer/thesis/delete/', methods: 'DELETE'}; break;\r\n        case 'WAITTING':  config = {endpoint: '/lecturer/thesis/reject/', methods: \"POST\"}; break;\r\n        case 'ACTIVE': config = {endpoint: '/lecturer/thesis/cancel/', methods: \"POST\"}; break;\r\n        default: config = null;\r\n      }; break;\r\n  }\r\n  let cf = false;\r\n  if(!config) return 0;\r\n  else cf = confirm(\"Bạn có chắc chắn thực hiện hành động này không. Hành động này có thể ảnh hưởng lớn đến kết quả sau này\");\r\n  if (cf)\r\n    request(config.endpoint+thesisId, config.methods)\r\n      .then (result => {\r\n          if(result && result.httpCode && result.httpCode === 200){\r\n            console.log(\"ok\")\r\n          }\r\n      })\r\n}\r\n\r\nexport default TableRow;\r\n\r\n\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAJA;AAMA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAHA;AACA;AAIA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAHA;AACA;AATA;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAHA;AACA;AAGA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAJA;AACA;AAIA;AAAA;AAbA;AACA;AAcA;AACA;AAEA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}