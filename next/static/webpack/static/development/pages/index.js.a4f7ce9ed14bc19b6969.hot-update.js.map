{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.a4f7ce9ed14bc19b6969.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import Head from 'next/head';\r\nimport Router from 'next/router'\r\nimport ContentForm from './ContentForm';\r\nimport NavBar from '../components/NavBar';\r\nimport request from '../assets/request';\r\nimport '../assets/styles.css'\r\n\r\nclass App extends React.Component { \r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            loading_logout: false\r\n        }\r\n    }\r\n    componentDidMount () {\r\n        let token = localStorage.getItem('token')\r\n        let role = localStorage.getItem('userRole')\r\n        let id = localStorage.getItem('userId')\r\n        if(!token || !role || !id) {\r\n            Router.push(\"/login\")\r\n        } else {\r\n            request('/auth/verify', 'GET')\r\n                .then(result => {\r\n                    if(!(result && result.httpCode && result.httpCode === 200)){\r\n                        this.onLogout()\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    this.onLogout()\r\n                })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div className=\"page\"></div>\r\n                <Head>\r\n                    <title>Thesis management</title>\r\n                    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css\"/>\r\n                    <link rel=\"stylesheet\" href=\"https://use.fontawesome.com/releases/v5.3.1/css/all.css\" integrity=\"sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU\" crossorigin=\"anonymous\"/>\r\n                    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js\"></script>\r\n                    <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js\"></script>\r\n                </Head>\r\n                <div className={this.state.loading_logout? 'login_loading' : 'disappear'}> <i className=\"fa fa-spinner fa-spin\"></i> </div>\r\n                <NavBar onLogout={this.onLogout}/>\r\n                <ContentForm/>\r\n            </div>\r\n    )}\r\n\r\n    onLogout = () => {\r\n        let cf = confirm(\"Bạn có chắc chắn muốn đăng xuất\");\r\n        if(cf){\r\n            this.setState({loading_logout: true})\r\n            localStorage.removeItem('token')\r\n            localStorage.removeItem('userRole')\r\n            localStorage.removeItem('userId')\r\n            Router.push(`/login`)\r\n        }\r\n    }\r\n}\r\n\r\nexport default App;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AA2CA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAlDA;AACA;AADA;AAFA;AAKA;AACA;;;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;;;;AAzCA;AACA;AAsDA;;;;A","sourceRoot":""}