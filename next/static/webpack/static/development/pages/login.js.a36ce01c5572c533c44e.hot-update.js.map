{"version":3,"file":"static/webpack/static\\development\\pages\\login.js.a36ce01c5572c533c44e.hot-update.js","sources":["webpack:///./pages/LoginForm.js"],"sourcesContent":["import request from '../assets/request';\r\nimport Footer from '../components/Footer';\r\n\r\nclass LoginForm extends React.Component {\r\n    constructor (props) {\r\n        super(props)\r\n        this.state = {\r\n            username: \"\",\r\n            password: \"\",\r\n            role: \"STU\",\r\n            loading: false\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"login_form\">\r\n            <div className={loading? 'login_loading' : ''}> <i className=\"fa fa-spinner fa-spin\"></i> </div>\r\n            <div className=\"form-signin\">       \r\n              <h2 className=\"form-signin-heading\">Vui lòng đăng nhập</h2>\r\n              <input type=\"text\" className=\"form-control input_user\" name=\"username\" placeholder=\"Tên đăng nhập\" required=\"\" autoFocus=\"\" onChange={e => this.setState({username: e.target.value})}/>\r\n              <input type=\"password\" className=\"form-control input_pass\" name=\"password\" placeholder=\"Mật khẩu\" required=\"\" onChange={e => this.setState({password: e.target.value})}/>   \r\n              <select className=\"select form-control\" name=\"role\" defaultValue onChange={e => this.setState({role: e.target.value})}>\r\n                <option value=\"STU\">Sinh viên</option>\r\n                <option value=\"LEC\">Gỉang viên</option>\r\n                <option value=\"MAN\">Quản lý</option>\r\n              </select>   \r\n              <button className=\"btn btn-lg btn-primary btn-block\" type=\"submit\" onClick={e => this.onSubmit()}>Đăng nhập</button> \r\n              <div  style={{paddingTop: \"10px\"}}></div>  \r\n              <Footer/>\r\n            </div>\r\n          </div>\r\n        );\r\n    }\r\n\r\n    onSubmit = () => {\r\n        this.setState({loading: true})\r\n        request('/auth/login', 'POST', '', {\"Content-type\": \"application/json\"}, {username: this.state.username, password: this.state.password, userRole: this.state.role})\r\n            .then(result => {\r\n                if(result && result.httpCode && result.httpCode === 200){\r\n                    localStorage.setItem('token', result.result.token)\r\n                    localStorage.setItem('userRole',  this.role);\r\n                    request('/auth/verify', 'GET')\r\n                        .then(result => {\r\n                            if(result && result.httpCode && result.httpCode === 200){\r\n                                localStorage.setItem('userId', result.result.userId);\r\n                                this.props.onSuccess()\r\n                            }\r\n                        })\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport default LoginForm;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AA+BA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AA7CA;AACA;AACA;AACA;AACA;AAJA;AAFA;AAQA;AACA;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;;AA7BA;AACA;AAiDA;;;;A","sourceRoot":""}